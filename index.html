<!doctype html><html><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<link href="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.css" rel="stylesheet"/>
<script src="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.js"></script>
<style>html,body,#map{height:100%;margin:0}</style></head><body>
<div id="map"></div>
<script>
  mapboxgl.accessToken = "pk.eyJ1IjoidHdhaGVlZDc4MDciLCJhIjoiY21kaXo0c3BwMGU3eTJrcno2bmlnY3NtYSJ9.sr3WDZwdql2M46HUPtUiWw";
  const API = "http://localhost:5501";
  const tiles = [`${API}/tile/parcel/by-coords/{z}/{x}/{y}.mvt?lat=32.7767&lon=-96.7970&extent=1024`];

  const map = new mapboxgl.Map({
    container: "map",
    style: "mapbox://styles/mapbox/light-v11",
    center: [-96.7970, 32.7767],
    zoom: 13
  });

  map.on("load", () => {
    map.addSource("parcel_xyz", { type: "vector", tiles, minzoom: 5, maxzoom: 22 });

    map.addLayer({
      id: "parcel-neighbors",
      type: "fill",
      source: "parcel_xyz",
      "source-layer": "parcels",
      filter: ["==", ["get","role"], "neighbor"],
      paint: { "fill-color": "#1e90ff", "fill-opacity": 0.35 }
    });

    map.addLayer({
      id: "parcel-target",
      type: "line",
      source: "parcel_xyz",
      "source-layer": "parcels",
      filter: ["==", ["get","role"], "subject"],
      paint: { "line-color": "#ff0033", "line-width": 3 }
    });
  });
</script>
</body></html>
